<html>
<head>
    <script src="gpu-browser.min.js"></script>
    <script src="MyLib.js"></script>
</head>
<body>
    <div id="xy" style="width:100%;height:100%;"></div>
    
<script>
    const gpu = new GPU();
    
    const kernel = gpu.createKernel(fractal).setOutput([512,512]).setGraphical(true);
    const cv = kernel.canvas;
    
    document.getElementById("xy").appendChild(cv);
    cv.style.width = "100%";
    cv.style.height = "100%";

    let cfg = [512,512,-5,5,5,-5];
    
    for(let i = 1;i <= 10;++i) {
        cfg.push(0);
        cfg.push(0);
    }
    
    cfg[6] = 0;
    cfg[7] = 0;
    cfg[8] = 0;
    cfg[9] = 0;
    cfg[10] = 1;
    cfg[11] = 0;
    
    cfg[16] = 1;
    cfg[17] = 0;
    
    kernel(cfg);
    
    window.setInterval(() => {
        for(let i = 1;i <= 5;++i) {
            cfg[6 + 2 * i] += 0.002 * i * (Math.random() - 0.5);
            cfg[6 + 2 * i + 1] += 0.002 * i * (Math.random() - 0.5);
        }
        kernel(cfg);
    },10);
</script>
</body>
</html>

